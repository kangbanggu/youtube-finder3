<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube ë²¤ì¹˜ë§ˆí‚¹ ê²€ìƒ‰ê¸°</title>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
    h1 { text-align: center; color: #333; }
    .filter-box { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 10px; margin-bottom: 20px; }
    input, select, button { padding: 10px; border-radius: 6px; border: 1px solid #ccc; width: 100%; font-size: 15px; }
    button { background-color: #ff4b4b; color: #fff; border: none; cursor: pointer; transition: 0.3s; }
    button:hover { background-color: #e63c3c; }
    #results { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 15px; }
    .card { background: #fff; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 15px; }
    .thumb { width: 100%; border-radius: 8px; }
    .title { font-weight: bold; margin: 8px 0; color: #222; }
    .meta { font-size: 14px; color: #555; }
    .efficiency { font-weight: bold; color: #007700; }
  </style>
</head>
<body>
  <h1>ğŸ“Š ìœ íŠœë¸Œ ë²¤ì¹˜ë§ˆí‚¹ ê²€ìƒ‰ê¸°</h1>
  <div class="filter-box">
    <input type="text" id="search" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥ (ì˜ˆ: ë³µì§€, ê±´ê°•, íŒ¨ì…˜)">
    <select id="type">
      <option value="any">ëª¨ë‘</option>
      <option value="video">ë™ì˜ìƒ</option>
      <option value="shorts">ì‡¼ì¸ </option>
      <option value="channel">ì±„ë„</option>
      <option value="live">ë¼ì´ë¸Œ</option>
    </select>
    <select id="date">
      <option value="any">ê¸°ê°„ ì „ì²´</option>
      <option value="today">ì˜¤ëŠ˜</option>
      <option value="week">ìµœê·¼ 1ì£¼</option>
      <option value="month">ì´ë²ˆ ë‹¬</option>
      <option value="3months">3ê°œì›” ì´ë‚´</option>
      <option value="6months">6ê°œì›” ì´ë‚´</option>
      <option value="year">ì˜¬í•´</option>
    </select>
    <input type="number" id="minSubs" placeholder="ìµœì†Œ êµ¬ë…ì ìˆ˜">
    <input type="number" id="maxSubs" placeholder="ìµœëŒ€ êµ¬ë…ì ìˆ˜">
    <input type="number" id="minViews" placeholder="ìµœì†Œ ì¡°íšŒìˆ˜">
    <input type="number" id="maxViews" placeholder="ìµœëŒ€ ì¡°íšŒìˆ˜">
    <button id="searchBtn">ê²€ìƒ‰í•˜ê¸°</button>
  </div>

  <div id="results"></div>

  <script>
    const API_KEY = "ğŸ‘‰ì—¬ê¸°ì—_ë³¸ì¸_ìœ íŠœë¸Œ_API_KEY_ë¶™ì—¬ë„£ê¸°ğŸ‘ˆ";

    document.getElementById('searchBtn').addEventListener('click', async () => {
      const q = document.getElementById('search').value;
      const type = document.getElementById('type').value;
      const minSubs = +document.getElementById('minSubs').value || 0;
      const maxSubs = +document.getElementById('maxSubs').value || Infinity;
      const minViews = +document.getElementById('minViews').value || 0;
      const maxViews = +document.getElementById('maxViews').value || Infinity;

      let resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = "ê²€ìƒ‰ ì¤‘ì…ë‹ˆë‹¤...";

      const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=${type === 'any' ? 'video,channel' : type}&q=${encodeURIComponent(q)}&maxResults=10&key=${API_KEY}`);
      const data = await res.json();

      resultsDiv.innerHTML = "";
      for (let item of data.items) {
        const videoId = item.id.videoId || "";
        const channelId = item.snippet.channelId;
        const channelRes = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelId}&key=${API_KEY}`);
        const channelData = await channelRes.json();
        const stats = channelData.items[0]?.statistics;
        const subCount = +stats?.subscriberCount || 0;
        const viewCount = +stats?.viewCount || 0;
        const efficiency = subCount > 0 ? (viewCount / subCount).toFixed(2) : 0;

        if (subCount < minSubs || subCount > maxSubs || viewCount < minViews || viewCount > maxViews) continue;

        const card = `
          <div class="card">
            <img class="thumb" src="${item.snippet.thumbnails.high.url}" alt="ì¸ë„¤ì¼">
            <div class="title">${item.snippet.title}</div>
            <div class="meta">ì±„ë„: ${item.snippet.channelTitle}</div>
            <div class="meta">êµ¬ë…ì: ${subCount.toLocaleString()} | ì¡°íšŒìˆ˜: ${viewCount.toLocaleString()}</div>
            <div class="efficiency">ì¡°íšŒ íš¨ìœ¨: ${efficiency}</div>
            <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">ì˜ìƒ ë³´ëŸ¬ê°€ê¸°</a>
          </div>
        `;
        resultsDiv.innerHTML += card;
      }

      if (resultsDiv.innerHTML === "") resultsDiv.innerHTML = "ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
    });
  </script>
</body>
</html>
